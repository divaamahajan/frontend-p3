{"ast":null,"code":"var _jsxFileName = \"/Users/achin.gupta/Documents/mycode/buildathon-templates/p3/frontend-p3/src/components/QAchatbot/QAChatWindow.jsx\",\n  _s = $RefreshSig$();\n// src/components/chatbot/QAChatWindow.jsx\nimport { useState, useRef, useEffect } from \"react\";\nimport MessageList from \"./MessageList\";\nimport ChatInput from \"./ChatInput\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = process.env.REACT_APP_API_BASE;\nexport const KNOWLEDGE_GRAPH_BASE = `${API_BASE}/knowledge-graph`;\nexport const AI_CHAT_URL = `${KNOWLEDGE_GRAPH_BASE}/qa`;\nexport default function QAChatWindow({\n  user,\n  token\n}) {\n  _s();\n  const [messages, setMessages] = useState([{\n    id: 1,\n    sender: \"bot\",\n    text: `üß† Hello${user ? ` ${user}` : ''}! I'm your Knowledge Graph assistant. Ask me anything about your uploaded documents!`,\n    timestamp: new Date()\n  }]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isOnline, setIsOnline] = useState(true);\n  const [retryCount, setRetryCount] = useState(0);\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n  useEffect(() => {\n    fetchFiles();\n  }, []);\n  const fetchFiles = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch(`${KNOWLEDGE_GRAPH_BASE}/files`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch files\");\n      const data = await res.json();\n      setFiles(data);\n    } catch (err) {\n      console.error(err);\n    }\n    setLoading(false);\n  };\n  const toggleFileSelection = filename => {\n    if (selectedFiles.includes(filename)) {\n      setSelectedFiles(prev => prev.filter(f => f !== filename));\n    } else {\n      setSelectedFiles(prev => [...prev, filename]);\n    }\n  };\n  const selectAllFiles = () => {\n    setSelectedFiles(files.map(f => f.filename));\n  };\n  const clearSelection = () => {\n    setSelectedFiles([]);\n  };\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n  useEffect(() => {\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n  const sendMessage = async text => {\n    if (!text.trim() || isLoading) return;\n    const userMessage = {\n      id: Date.now(),\n      sender: \"user\",\n      text,\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setIsLoading(true);\n    try {\n      // Build query parameters for the QA endpoint\n      const params = new URLSearchParams();\n      params.append('question', text);\n\n      // Add selected files if any are selected\n      if (selectedFiles.length > 0) {\n        selectedFiles.forEach(filename => {\n          params.append('filenames', filename);\n        });\n      }\n      const response = await fetch(`${AI_CHAT_URL}?${params.toString()}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`Server error: ${response.status}`);\n      }\n      const data = await response.json();\n      const botMessage = {\n        id: Date.now() + 1,\n        sender: \"bot\",\n        text: data.answer || data.reply || \"I received your message but couldn't generate a response.\",\n        timestamp: new Date()\n      };\n      setMessages(prev => [...prev, botMessage]);\n      setRetryCount(0);\n    } catch (error) {\n      console.error(\"Chat error:\", error);\n      let errorMessage = \"I'm having trouble connecting right now. \";\n      if (!isOnline) {\n        errorMessage = \"üîå You appear to be offline. Please check your internet connection.\";\n      } else if (error.message.includes('500')) {\n        errorMessage = \"üîß I'm experiencing technical difficulties. Please try again in a moment.\";\n      } else if (error.message.includes('404')) {\n        errorMessage = \"‚ö†Ô∏è Chat service is temporarily unavailable.\";\n      } else {\n        errorMessage += retryCount > 2 ? \"Please refresh the page if the problem persists.\" : \"Please try again.\";\n      }\n      const errorBotMessage = {\n        id: Date.now() + 1,\n        sender: \"bot\",\n        text: errorMessage,\n        timestamp: new Date(),\n        isError: true\n      };\n      setMessages(prev => [...prev, errorBotMessage]);\n      setRetryCount(prev => prev + 1);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const clearChat = () => {\n    setMessages([{\n      id: 1,\n      sender: \"bot\",\n      text: \"üëã Hello! I'm your AI assistant. How can I help you today?\",\n      timestamp: new Date()\n    }]);\n    setRetryCount(0);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-center min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col w-full max-w-4xl h-[85vh] bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 text-white px-6 py-4 shadow-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-3 h-3 bg-green-400 rounded-full animate-pulse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-xl font-bold\",\n                children: \"AI Assistant\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-blue-100 text-sm\",\n                children: [isOnline ? \"Online\" : \"Offline\", \" \\u2022 Always here to help\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: clearChat,\n            className: \"text-blue-100 hover:text-white hover:bg-blue-600 p-2 rounded-lg transition-all duration-200 text-sm font-medium\",\n            title: \"Clear chat\",\n            children: \"\\uD83D\\uDDD1\\uFE0F Clear\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"main\", {\n            className: \"flex-1 overflow-y-auto p-6 bg-gradient-to-b from-gray-50 to-white space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(MessageList, {\n              messages: messages\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 11\n            }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2 text-gray-500\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex space-x-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-2 h-2 bg-blue-500 rounded-full animate-bounce\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-2 h-2 bg-blue-500 rounded-full animate-bounce\",\n                  style: {\n                    animationDelay: '0.1s'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-2 h-2 bg-blue-500 rounded-full animate-bounce\",\n                  style: {\n                    animationDelay: '0.2s'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm italic\",\n                children: \"AI is thinking...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n            className: \"p-6 bg-white border-t border-gray-100 shadow-inner\",\n            children: [!isOnline && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4 p-3 bg-orange-50 border border-orange-200 rounded-lg text-orange-700 text-sm flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u26A0\\uFE0F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"You're currently offline. Messages will be sent when connection is restored.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(ChatInput, {\n              onSend: sendMessage,\n              disabled: !isOnline,\n              isLoading: isLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-80 bg-gray-50 border-l border-gray-200 flex flex-col\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 py-4 bg-gray-100 border-b border-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-sm font-semibold text-gray-800\",\n                children: \"\\uD83D\\uDCC1 Select Files\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-600 bg-white px-2 py-1 rounded-full\",\n                children: [selectedFiles.length, \"/\", files.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-600 mb-3\",\n              children: loading ? \"Loading your files...\" : files.length === 0 ? \"No files uploaded yet.\" : \"Choose files to search through.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 15\n            }, this), files.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: selectAllFiles,\n                className: \"text-xs text-purple-600 hover:text-purple-800 font-medium\",\n                children: \"Select All\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 19\n              }, this), selectedFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: clearSelection,\n                className: \"text-xs text-gray-600 hover:text-gray-800 font-medium\",\n                children: \"Clear\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 overflow-y-auto p-4\",\n            children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center py-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"inline-block animate-spin rounded-full h-6 w-6 border-2 border-blue-600 border-t-transparent mb-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-600\",\n                children: \"Loading files...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 17\n            }, this) : files.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center py-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-12 h-12 text-gray-300 mx-auto mb-3\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 1,\n                  d: \"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-500 text-center\",\n                children: \"No files available\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-400 text-center mt-1\",\n                children: \"Upload files first\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: files.map((file, index) => /*#__PURE__*/_jsxDEV(\"label\", {\n                className: `flex items-center space-x-3 p-3 rounded-lg border cursor-pointer transition-all duration-200 ${selectedFiles.includes(file.filename) ? \"bg-blue-50 border-blue-300 shadow-sm\" : \"bg-white border-gray-200 hover:bg-gray-50 hover:border-gray-300\"}`,\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: selectedFiles.includes(file.filename),\n                  onChange: () => toggleFileSelection(file.filename),\n                  className: \"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-1 min-w-0\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                      className: \"w-4 h-4 text-gray-400 flex-shrink-0\",\n                      fill: \"none\",\n                      stroke: \"currentColor\",\n                      viewBox: \"0 0 24 24\",\n                      children: /*#__PURE__*/_jsxDEV(\"path\", {\n                        strokeLinecap: \"round\",\n                        strokeLinejoin: \"round\",\n                        strokeWidth: 2,\n                        d: \"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 302,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 301,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm font-medium text-gray-700 truncate\",\n                      title: file.filename,\n                      children: file.filename\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 304,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 300,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 23\n                }, this)]\n              }, file.filename, true, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 9\n          }, this), selectedFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 bg-purple-50 border-t border-purple-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-purple-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: selectedFiles.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 19\n              }, this), \" file\", selectedFiles.length !== 1 ? 's' : '', \" selected\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-purple-600 mt-1\",\n              children: selectedFiles.length === 0 ? \"All files will be searched\" : \"Only selected files will be searched\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 5\n  }, this);\n}\n_s(QAChatWindow, \"c5BwosAu/+RQMjFajaxoIFAc1ss=\");\n_c = QAChatWindow;\nvar _c;\n$RefreshReg$(_c, \"QAChatWindow\");","map":{"version":3,"names":["useState","useRef","useEffect","MessageList","ChatInput","jsxDEV","_jsxDEV","API_BASE","process","env","REACT_APP_API_BASE","KNOWLEDGE_GRAPH_BASE","AI_CHAT_URL","QAChatWindow","user","token","_s","messages","setMessages","id","sender","text","timestamp","Date","isLoading","setIsLoading","isOnline","setIsOnline","retryCount","setRetryCount","selectedFiles","setSelectedFiles","files","setFiles","loading","setLoading","messagesEndRef","fetchFiles","res","fetch","headers","Authorization","ok","Error","data","json","err","console","error","toggleFileSelection","filename","includes","prev","filter","f","selectAllFiles","map","clearSelection","_messagesEndRef$curre","current","scrollIntoView","behavior","handleOnline","handleOffline","window","addEventListener","removeEventListener","sendMessage","trim","userMessage","now","params","URLSearchParams","append","length","forEach","response","toString","method","status","botMessage","answer","reply","errorMessage","message","errorBotMessage","isError","clearChat","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","style","animationDelay","ref","onSend","disabled","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","file","index","type","checked","onChange","_c","$RefreshReg$"],"sources":["/Users/achin.gupta/Documents/mycode/buildathon-templates/p3/frontend-p3/src/components/QAchatbot/QAChatWindow.jsx"],"sourcesContent":["// src/components/chatbot/QAChatWindow.jsx\nimport { useState, useRef, useEffect } from \"react\";\nimport MessageList from \"./MessageList\";\nimport ChatInput from \"./ChatInput\";\n\nconst API_BASE = process.env.REACT_APP_API_BASE;\nexport const KNOWLEDGE_GRAPH_BASE = `${API_BASE}/knowledge-graph`;\nexport const AI_CHAT_URL = `${KNOWLEDGE_GRAPH_BASE}/qa`;\n\nexport default function QAChatWindow({ user, token }) {\n  const [messages, setMessages] = useState([\n    { \n      id: 1,\n      sender: \"bot\", \n      text: `üß† Hello${user ? ` ${user}` : ''}! I'm your Knowledge Graph assistant. Ask me anything about your uploaded documents!`,\n      timestamp: new Date()\n    },\n  ]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isOnline, setIsOnline] = useState(true);\n  const [retryCount, setRetryCount] = useState(0);\n  const [selectedFiles, setSelectedFiles] = useState([]);\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const messagesEndRef = useRef(null);\n  \n    useEffect(() => {\n      fetchFiles();\n    }, []);\n\n  const fetchFiles = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch(`${KNOWLEDGE_GRAPH_BASE}/files`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch files\");\n      const data = await res.json();\n      setFiles(data);\n    } catch (err) {\n      console.error(err);\n    }\n    setLoading(false);\n  };\n\n  const toggleFileSelection = (filename) => {\n    if (selectedFiles.includes(filename)) {\n      setSelectedFiles(prev => prev.filter(f => f !== filename));\n    } else {\n      setSelectedFiles(prev => [...prev, filename]);\n    }\n  };\n\n  const selectAllFiles = () => {\n    setSelectedFiles(files.map(f => f.filename));\n  };\n\n  const clearSelection = () => {\n    setSelectedFiles([]);\n  };\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  useEffect(() => {\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n    \n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n    \n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n\n  const sendMessage = async (text) => {\n    if (!text.trim() || isLoading) return;\n\n    const userMessage = {\n      id: Date.now(),\n      sender: \"user\",\n      text,\n      timestamp: new Date()\n    };\n\n    setMessages((prev) => [...prev, userMessage]);\n    setIsLoading(true);\n\n    try {\n      // Build query parameters for the QA endpoint\n      const params = new URLSearchParams();\n      params.append('question', text);\n      \n      // Add selected files if any are selected\n      if (selectedFiles.length > 0) {\n        selectedFiles.forEach(filename => {\n          params.append('filenames', filename);\n        });\n      }\n\n      const response = await fetch(`${AI_CHAT_URL}?${params.toString()}`, {\n        method: \"POST\",\n        headers: { \n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${token}`\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`Server error: ${response.status}`);\n      }\n\n      const data = await response.json();\n      const botMessage = {\n        id: Date.now() + 1,\n        sender: \"bot\",\n        text: data.answer || data.reply || \"I received your message but couldn't generate a response.\",\n        timestamp: new Date()\n      };\n      \n      setMessages((prev) => [...prev, botMessage]);\n      setRetryCount(0);\n    } catch (error) {\n      console.error(\"Chat error:\", error);\n      \n      let errorMessage = \"I'm having trouble connecting right now. \";\n      \n      if (!isOnline) {\n        errorMessage = \"üîå You appear to be offline. Please check your internet connection.\";\n      } else if (error.message.includes('500')) {\n        errorMessage = \"üîß I'm experiencing technical difficulties. Please try again in a moment.\";\n      } else if (error.message.includes('404')) {\n        errorMessage = \"‚ö†Ô∏è Chat service is temporarily unavailable.\";\n      } else {\n        errorMessage += retryCount > 2 \n          ? \"Please refresh the page if the problem persists.\"\n          : \"Please try again.\";\n      }\n\n      const errorBotMessage = {\n        id: Date.now() + 1,\n        sender: \"bot\",\n        text: errorMessage,\n        timestamp: new Date(),\n        isError: true\n      };\n      \n      setMessages((prev) => [...prev, errorBotMessage]);\n      setRetryCount(prev => prev + 1);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const clearChat = () => {\n    setMessages([{\n      id: 1,\n      sender: \"bot\", \n      text: \"üëã Hello! I'm your AI assistant. How can I help you today?\",\n      timestamp: new Date()\n    }]);\n    setRetryCount(0);\n  };\n\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 p-4\">\n      <div className=\"flex flex-col w-full max-w-4xl h-[85vh] bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden\">\n        {/* Enhanced Header */}\n        <header className=\"bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 text-white px-6 py-4 shadow-lg\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-3 h-3 bg-green-400 rounded-full animate-pulse\"></div>\n              <div>\n                <h1 className=\"text-xl font-bold\">AI Assistant</h1>\n                <p className=\"text-blue-100 text-sm\">\n                  {isOnline ? \"Online\" : \"Offline\"} ‚Ä¢ Always here to help\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={clearChat}\n              className=\"text-blue-100 hover:text-white hover:bg-blue-600 p-2 rounded-lg transition-all duration-200 text-sm font-medium\"\n              title=\"Clear chat\"\n            >\n              üóëÔ∏è Clear\n            </button>\n          </div>\n        </header>\n\n        {/* Main Content - Split Layout */}\n        <div className=\"flex h-full\">\n          \n          {/* Left Side - Chat Window */}\n          <div className=\"flex-1 flex flex-col\">\n        {/* Enhanced Message area */}\n        <main className=\"flex-1 overflow-y-auto p-6 bg-gradient-to-b from-gray-50 to-white space-y-4\">\n          <MessageList messages={messages} />\n          {isLoading && (\n            <div className=\"flex items-center space-x-2 text-gray-500\">\n              <div className=\"flex space-x-1\">\n                <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\"></div>\n                <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{animationDelay: '0.1s'}}></div>\n                <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-bounce\" style={{animationDelay: '0.2s'}}></div>\n              </div>\n              <span className=\"text-sm italic\">AI is thinking...</span>\n            </div>\n          )}\n          <div ref={messagesEndRef} />\n        </main>\n\n        {/* Enhanced Input area */}\n        <footer className=\"p-6 bg-white border-t border-gray-100 shadow-inner\">\n          {!isOnline && (\n            <div className=\"mb-4 p-3 bg-orange-50 border border-orange-200 rounded-lg text-orange-700 text-sm flex items-center space-x-2\">\n              <span>‚ö†Ô∏è</span>\n              <span>You're currently offline. Messages will be sent when connection is restored.</span>\n            </div>\n          )}\n          <ChatInput onSend={sendMessage} disabled={!isOnline} isLoading={isLoading} />\n        </footer>\n          </div>\n\n          {/* Right Side - File List */}\n          <div className=\"w-80 bg-gray-50 border-l border-gray-200 flex flex-col\">\n            \n            {/* File List Header */}\n            <div className=\"px-4 py-4 bg-gray-100 border-b border-gray-200\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h3 className=\"text-sm font-semibold text-gray-800\">üìÅ Select Files</h3>\n                <span className=\"text-xs text-gray-600 bg-white px-2 py-1 rounded-full\">\n                  {selectedFiles.length}/{files.length}\n                </span>\n              </div>\n              \n              <p className=\"text-xs text-gray-600 mb-3\">\n                {loading \n                  ? \"Loading your files...\"\n                  : files.length === 0 \n                  ? \"No files uploaded yet.\" \n                  : \"Choose files to search through.\"}\n              </p>\n\n              {files.length > 0 && (\n                <div className=\"flex space-x-2\">\n                  <button\n                    onClick={selectAllFiles}\n                    className=\"text-xs text-purple-600 hover:text-purple-800 font-medium\"\n                  >\n                    Select All\n                  </button>\n                  {selectedFiles.length > 0 && (\n                    <button\n                      onClick={clearSelection}\n                      className=\"text-xs text-gray-600 hover:text-gray-800 font-medium\"\n                    >\n                      Clear\n                    </button>\n                  )}\n                </div>\n              )}\n            </div>\n            \n            {/* File List */}\n        <div className=\"flex-1 overflow-y-auto p-4\">\n              {loading ? (\n                <div className=\"text-center py-8\">\n                  <div className=\"inline-block animate-spin rounded-full h-6 w-6 border-2 border-blue-600 border-t-transparent mb-2\"></div>\n                  <p className=\"text-xs text-gray-600\">Loading files...</p>\n                </div>\n              ) : files.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <svg className=\"w-12 h-12 text-gray-300 mx-auto mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                  </svg>\n                  <p className=\"text-xs text-gray-500 text-center\">No files available</p>\n                  <p className=\"text-xs text-gray-400 text-center mt-1\">Upload files first</p>\n                </div>\n              ) : (\n                <div className=\"space-y-2\">\n                  {files.map((file, index) => (\n                    <label \n                      key={file.filename} \n                      className={`flex items-center space-x-3 p-3 rounded-lg border cursor-pointer transition-all duration-200 ${\n                        selectedFiles.includes(file.filename)\n                          ? \"bg-blue-50 border-blue-300 shadow-sm\"\n                          : \"bg-white border-gray-200 hover:bg-gray-50 hover:border-gray-300\"\n                      }`}\n                    >\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedFiles.includes(file.filename)}\n                        onChange={() => toggleFileSelection(file.filename)}\n                        className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                      />\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center space-x-2\">\n                          <svg className=\"w-4 h-4 text-gray-400 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                          </svg>\n                          <span className=\"text-sm font-medium text-gray-700 truncate\" title={file.filename}>\n                            {file.filename}\n                          </span>\n                        </div>\n                      </div>\n                    </label>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* Selection Summary */}\n            {selectedFiles.length > 0 && (\n              <div className=\"p-4 bg-purple-50 border-t border-purple-200\">\n                <div className=\"text-xs text-purple-700\">\n                  <strong>{selectedFiles.length}</strong> file{selectedFiles.length !== 1 ? 's' : ''} selected\n                </div>\n                <div className=\"text-xs text-purple-600 mt-1\">\n                  {selectedFiles.length === 0 \n                    ? \"All files will be searched\" \n                    : \"Only selected files will be searched\"}\n                </div>\n              </div>\n            )}\n          </div>\n\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}